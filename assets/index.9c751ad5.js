import{j as G,r as c,C as te,l as re,R as ie,a as ne,q as ae}from"./vendor.e1b7c06f.js";const se=function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))m(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const F of s.addedNodes)F.tagName==="LINK"&&F.rel==="modulepreload"&&m(F)}).observe(document,{childList:!0,subtree:!0});function b(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function m(a){if(a.ep)return;a.ep=!0;const s=b(a);fetch(a.href,s)}};se();const t=G.exports.jsx,r=G.exports.jsxs,le=({fightStarted:u=!1,minsStart:d=45})=>{const[b,m]=c.exports.useState(!1),a=c.exports.useRef(null);c.exports.useEffect(()=>{a.current=Date.now()+d*6e4,m(u)},[u]);const s=({hours:F,minutes:p,seconds:L,completed:x})=>{if(x)return t("span",{className:"timer-finish",children:"00:00"});{const C=g=>String(g).padStart(2,"0"),S=`${C(p)}:${C(L)}`;let N="";return p<=4?N="timer-danger":p<=14?N="timer-warning":N="",t("span",{className:N,children:S})}};return r("div",{children:[b&&t(te,{date:a.current,renderer:s}),!b&&r("span",{className:"timer-ready",children:[d,":00"]})]})};function oe(){const u={physical:{hitPointModifier:0,damageModifier:2,armourModifier:2,icon:"https://cdn.glitch.global/0dd1f9e8-5f95-4760-ad67-93906c54fa55/DPS_Icon_1.png?v=1669718259900"},caster:{hitPointModifier:0,damageModifier:2,armourModifier:1,icon:"https://cdn.glitch.global/0dd1f9e8-5f95-4760-ad67-93906c54fa55/Magic_Ranged_DPS_Icon_1.png?v=1669718261359"},healer:{hitPointModifier:3,damageModifier:0,armourModifier:1,icon:"https://cdn.glitch.global/0dd1f9e8-5f95-4760-ad67-93906c54fa55/Healer_Icon_1.png?v=1669718258370"},tank:{hitPointModifier:0,damageModifier:0,armourModifier:3,icon:"https://cdn.glitch.global/0dd1f9e8-5f95-4760-ad67-93906c54fa55/Tank_Icon_1.png?v=1669718256078"}},[d,b]=c.exports.useState("Fighter One"),[m,a]=c.exports.useState("Fighter Two"),[s,F]=c.exports.useState(null),[p,L]=c.exports.useState(null),[x,C]=c.exports.useState([]),[S,N]=c.exports.useState([]),[g,y]=c.exports.useState(null),[T,P]=c.exports.useState(null),[D,O]=c.exports.useState(""),[v,_]=c.exports.useState(!1),[M,I]=c.exports.useState(0),[A,J]=c.exports.useState(30),B=e=>{if(e.length>0){const n=e.map(i=>{if(i.limit)return r("div",{className:"fight-report-damage",children:[t("div",{className:"fight-report-damage-attack",children:r("div",{children:["Turn ",i.turn]})}),t("div",{className:"fight-report-damage-amount",children:"LB"})]});let o;return i.amount>=10?o=i.amount:i.amount>0?o=`0${i.amount}`:o="--",r("div",{className:"fight-report-damage",children:[r("div",{className:"fight-report-damage-attack",children:["Turn ",i.turn]}),t("div",{className:"fight-report-damage-amount",children:o})]})});return t("div",{className:"fight-report-log",children:n.reverse()})}return t("div",{className:"fight-report-log",children:t("em",{className:"no-logs",children:"Awaiting results"})})},Q=(e,n)=>{if(e){const i=25,o=u[e];let l=i+o.hitPointModifier;return n.forEach(h=>{h.limit&&(l=1),l-=h.amount}),l<0?"00":l<10&&l>=0?`0${l}`:l}return"--"},U=e=>{let n="https://cdn.glitch.global/0dd1f9e8-5f95-4760-ad67-93906c54fa55/All-Rounder_Icon_1.png?v=1669718432007";return e&&u[e]&&(n=u[e].icon),t("img",{src:n,height:"64px",width:"64px"})},j=(e,n,i,o)=>{let l="fighter-plate";o&&(l+=" fighter-plate-active");const h=Q(n,i);return h==="00"&&(l+=" fighter-plate-ko"),r("div",{className:l,children:[t("div",{className:"fighter-name",children:e}),r("div",{className:"fighter-hp",children:[U(n),h]})]})},E=(e,n)=>{const i=[];for(const[o,l]of Object.entries(u)){let h="fighterClassButton";e==o&&(h+=" fighterClassSelected"),i.push(t("button",{className:h,disabled:v,onClick:w=>n(o),title:re.exports.startCase(o),children:t("img",{src:l.icon,height:"32px",width:"32px"})}))}return t("div",{className:"fighter-class-buttons",children:i})},$=()=>{const e=g===0?1:0;if(y(e),e===T){const n=M+1;I(n)}O("")},H=(e,n)=>{if(g===0){const i=S;i.push({amount:e,crit:n,turn:M}),N(i)}else{const i=x;i.push({amount:e,crit:n,turn:M}),C(i)}$()},V=()=>{if(g===0){const e=S;e.push({amount:0,limit:!0,turn:M}),N(e)}else{const e=x;e.push({amount:0,limit:!0,turn:M}),C(e)}$()},R=(e,n,i)=>{const o=g===0?d:m,l=g===0?m:d;return e?r("button",{className:"full-button",onClick:h=>H(n,i),children:["Apply to ",l]}):r("button",{className:"full-button",onClick:h=>H(0),children:["End ",o,"'s Turn"]})},X=()=>r("button",{className:"full-button",onClick:V,children:["Weaken ",g===0?m:d]}),Y=e=>{if(!e)return!1;const n=parseInt(e);if(n===0)return r("div",{className:"damage-breakdown",children:[t("div",{children:t("div",{className:"damage-hit",children:"Fumble!"})}),R(!1,0,!1)]});if(n<300)return r("div",{className:"damage-breakdown",children:[t("div",{children:t("div",{className:"damage-hit",children:"Miss."})}),R(!1,0,!1)]});if(n===999)return r("div",{className:"damage-breakdown",children:[t("div",{className:"limit-break",children:"LIMIT BREAK"}),X()]});const i=Array.from(e),o=parseInt(i[0]),l=parseInt(i[1]||0),h=parseInt(i[2]||0),w=o>=3;let q=l===0?10:l,f=q;const k=h===0||h>=7,z=g===0?s:p,W=g===0?p:s;return f=f+u[z].damageModifier,k&&(f=f*2),f=f-u[W].armourModifier,f<0&&(f=0),r("div",{className:"damage-breakdown",children:[r("div",{children:[t("div",{className:"damage-hit",children:w?k?"Critical!":"Hit!":"Miss."}),w&&r("div",{children:["Deals ",t("strong",{children:f})," damage:"]}),w&&r("ul",{className:"damage-list",children:[r("li",{children:[`${q} base`," ",k&&"(x2)"]}),r("li",{children:[`+${u[z].damageModifier} ATK mod`," ",k&&"(x2)"]}),t("li",{children:`-${u[W].armourModifier} DEF mod`})]})]}),R(w,f,k)]})},K=e=>{y(e),P(e)},Z=()=>{_(!0),I(1)},ee=()=>{_(!1),b("Fighter One"),a("Fighter Two"),F(""),L(""),C([]),N([]),O(""),I(0),y(null),P(null)};return r("div",{className:"container",children:[r("div",{className:"fight-setup",children:[r("div",{className:"card fighters",children:[t("div",{className:"title",children:"Match Setup"}),r("div",{className:"fighter-input",children:[t("input",{disabled:v,placeholder:"Fighter one name",onChange:e=>b(e.target.value),value:d}),E(s,F)]}),r("div",{className:"fighter-input",children:[t("input",{disabled:v,placeholder:"Fighter two name",onChange:e=>a(e.target.value),value:m}),E(p,L)]}),r("div",{children:[t("div",{className:"subtitle",children:"First turn"}),t("button",{className:"full-button",disabled:T==0||v,onClick:e=>K(0),children:d}),t("button",{className:"full-button",disabled:T==1||v,onClick:e=>K(1),children:m})]}),r("div",{className:"fighter-input",children:[t("div",{className:"subtitle",children:"Fight length (mins)"}),t("input",{className:"fighter-input",disabled:v,placeholder:"45",onChange:e=>J(e.target.value),type:"number",value:A})]}),r("div",{children:[t("div",{className:"subtitle",children:"Controls"}),t("button",{className:"full-button",disabled:!s||!p||T===null||v,onClick:Z,children:"Start Fight"}),t("button",{className:"full-button",onClick:ee,children:"Reset Fight"})]})]}),r("div",{className:"card rolls",children:[t("div",{className:"title",children:"Calculator"}),t("input",{disabled:!v,placeholder:"Damage roll",onChange:e=>O(e.target.value),value:D}),Y(D)]})]}),r("div",{className:"fight-night",children:[r("div",{className:"card fight-turns",children:[r("div",{className:"turn",children:["Turn ",M]}),t("div",{className:"countdown",children:t(le,{fightStarted:v,minsStart:A})})]}),r("div",{className:"card fight-report",children:[r("div",{className:"fighter-report",children:[j(d,s,x,g===0),B(x)]}),r("div",{className:"fighter-report",children:[j(m,p,S,g===1),B(S)]})]})]})]})}function ce(){return t(oe,{})}ie.render(t(ne.StrictMode,{children:t(ae,{children:t(ce,{})})}),document.getElementById("root"));
